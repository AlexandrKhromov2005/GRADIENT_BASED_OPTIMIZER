#ifndef BLOCK_METRICS_H
#define BLOCK_METRICS_H

#include <opencv2/core.hpp>
#include <vector>
#include "config.h"

double calculateMSE(const cv::Mat& block1, const cv::Mat& block2);
double calculatePSNR(const cv::Mat& block1, const cv::Mat& block2);
double calc_s_zero(const cv::Mat& block, const int index);
double calc_s_one(const cv::Mat& block, const int index);

using reg = std::array<std::pair<std::size_t, std::size_t>, VEC_SIZE / 2>;

constexpr std::array<reg, 19> reg0_variations = {
    reg{{
        {7, 1}, {6, 1}, {5, 1},
        {5, 3}, {4, 3}, {3, 3},
        {3, 5}, {2, 5}, {1, 5},
        {1, 7}, {0, 7}
    }},
    reg{{
        {7, 0}, {7, 1}, {6, 0},
        {6, 1}, {5, 1}, {4, 4},
        {3, 4}, {3, 5}, {2, 4},
        {2, 5}, {1, 5}
    }},
    reg{{
        {6, 0}, {7, 1}, {5, 1},
        {6, 2}, {4, 3}, {3, 5},
        {2, 4}, {2, 6}, {1, 5},
        {1, 7}, {0, 6}
    }},
    reg{{
        {6, 0}, {5, 1}, {4, 2},
        {3, 3}, {3, 4}, {2, 4},
        {2, 5}, {1, 5}, {1, 6},
        {0, 6}, {0, 7}
    }},
    reg{{
        {7, 0}, {6, 0}, {5, 1},
        {5, 2}, {4, 2}, {3, 3},
        {3, 4}, {2, 4}, {1, 5},
        {1, 6}, {0, 6}
    }},
    reg{{
        {7, 1}, {6, 0}, {5, 2},
        {5, 3}, {4, 2}, {3, 5},
        {2, 4}, {2, 5}, {1, 7},
        {0, 6}, {0, 7}
    }},
    reg{{
        {7, 0}, {7, 1}, {6, 0},
        {6, 1}, {6, 2}, {5, 1},
        {5, 2}, {1, 6}, {1, 7},
        {0, 6}, {0, 7}
    }},
    reg{{
        {7, 0}, {7, 1}, {5, 1},
        {5, 2}, {5, 3}, {3, 3},
        {3, 4}, {3, 5}, {1, 5},
        {1, 6}, {1, 7}
    }},
    reg{{
        {6, 0}, {6, 1},
        {5, 1}, {5, 2}, {5, 3},
        {2, 4}, {2, 5}, {2, 6},
        {1, 5}, {1, 6}, {1, 7}
    }},
    reg{{
        {7, 0}, {7, 1}, {6, 0},
        {6, 1}, {6, 2}, {5, 1},
        {5, 2}, {4, 2}, {4, 3},
        {3, 3}, {2, 4}
    }},
    reg{{
        {6, 1}, {6, 2}, {5, 2},
        {5, 3}, {4, 3}, {4, 4},
        {3, 4}, {2, 4}, {2, 5},
        {1, 5}, {1, 6}
    }},
    reg{{
        {7, 0}, {6, 0}, {6, 1},
        {5, 1}, {5, 2}, {4, 3},
        {3, 3}, {3, 5}, {2, 4},
        {1, 5}, {0, 6}
    }},
    reg{{
        {7, 0}, {5, 2}, {5, 3},
        {4, 2}, {4, 3}, {4, 4},
        {3, 3}, {3, 4}, {1, 6},
        {1, 7}, {0, 6}
    }},
    reg{{
        {7, 0}, {7, 1}, {6, 0},
        {6, 1}, {6, 2}, {5, 1},
        {5, 3}, {4, 4}, {3, 4},
        {3, 5}, {2, 5}
    }},
    reg{{
        {7, 0}, {7, 1}, {6, 0},
        {6, 1}, {6, 2}, {5, 1},
        {5, 2}, {5, 3}, {4, 2},
        {4, 3}, {3, 3}
    }},
    reg{{
        {7, 0}, {7, 1}, {6, 0},
        {6, 1}, {5, 3}, {4, 2},
        {4, 4}, {3, 3}, {2, 5},
        {2, 6}, {1, 5}
    }},
    reg{{
        {7, 0}, {7, 1}, {6, 0},
        {6, 2}, {5, 1}, {5, 3},
        {4, 2}, {4, 4}, {3, 4},
        {2, 5}, {1, 6}
    }},
    reg{{
        {6, 1}, {6, 2}, {5, 1},
        {5, 2}, {3, 4}, {3, 5},
        {2, 4}, {2, 5}, {2, 6},
        {1, 5}, {1, 6}
    }},
    reg{{
        {6, 2}, {5, 2}, {5, 3},
        {4, 2}, {4, 3}, {3, 3},
        {3, 4}, {3, 5}, {2, 4},
        {2, 5}, {2, 6}
    }}
};

constexpr std::array<reg, 19> reg1_variations = {
    reg{{ {7, 0}, {6, 0}, {6, 2}, {5, 2}, {4, 2}, {4, 4}, {3, 4}, {2, 4}, {2, 6}, {1, 6}, {0, 6} }},
    reg{{ {6, 2}, {5, 2}, {5, 3}, {4, 2}, {4, 3}, {3, 3}, {2, 6}, {1, 6}, {1, 7}, {0, 6}, {0, 7} }},
    reg{{ {7, 0}, {6, 1}, {5, 2}, {5, 3}, {4, 2}, {4, 4}, {3, 3}, {3, 4}, {2, 5}, {1, 6}, {0, 7} }},
    reg{{ {7, 0}, {7, 1}, {6, 1}, {6, 2}, {5, 2}, {5, 3}, {4, 3}, {4, 4}, {3, 5}, {2, 6}, {1, 7} }},
    reg{{ {7, 1}, {6, 1}, {6, 2}, {5, 3}, {4, 3}, {4, 4}, {3, 5}, {2, 5}, {2, 6}, {1, 7}, {0, 7} }},
    reg{{ {7, 0}, {6, 1}, {6, 2}, {5, 1}, {4, 3}, {4, 4}, {3, 3}, {3, 4}, {2, 6}, {1, 5}, {1, 6} }},
    reg{{ {5, 3}, {4, 2}, {4, 3}, {4, 4}, {3, 3}, {3, 4}, {3, 5}, {2, 4}, {2, 5}, {2, 6}, {1, 5} }},
    reg{{ {6, 0}, {6, 1}, {6, 2}, {4, 2}, {4, 3}, {4, 4}, {2, 4}, {2, 5}, {2, 6}, {0, 6}, {0, 7} }},
    reg{{ {7, 0}, {7, 1}, {6, 2}, {4, 2}, {4, 3}, {4, 4}, {3, 4}, {3, 5}, {3, 3}, {0, 6}, {0, 7} }},
    reg{{ {5, 3}, {4, 4}, {3, 4}, {3, 5}, {2, 5}, {2, 6}, {1, 5}, {1, 6}, {1, 7}, {0, 6}, {0, 7} }},
    reg{{ {7, 0}, {7, 1}, {6, 0}, {5, 1}, {4, 2}, {3, 3}, {3, 5}, {2, 6}, {1, 7}, {0, 6}, {0, 7} }},
    reg{{ {7, 1}, {6, 2}, {5, 3}, {4, 2}, {4, 4}, {3, 4}, {2, 5}, {2, 6}, {1, 6}, {1, 7}, {0, 7} }},
    reg{{ {7, 1}, {6, 0}, {6, 1}, {6, 2}, {5, 1}, {3, 5}, {2, 4}, {2, 5}, {2, 6}, {1, 5}, {0, 7} }},
    reg{{ {5, 2}, {4, 2}, {4, 3}, {3, 3}, {2, 4}, {2, 6}, {1, 5}, {1, 6}, {1, 7}, {0, 6}, {0, 7} }},
    reg{{ {4, 4}, {3, 4}, {3, 5}, {2, 4}, {2, 5}, {2, 6}, {1, 5}, {1, 6}, {1, 7}, {0, 6}, {0, 7} }},
    reg{{ {6, 2}, {5, 1}, {5, 2}, {4, 3}, {3, 4}, {3, 5}, {2, 4}, {1, 6}, {1, 7}, {0, 6}, {0, 7} }},
    reg{{ {6, 1}, {5, 2}, {4, 3}, {3, 3}, {3, 5}, {2, 4}, {2, 6}, {1, 5}, {1, 7}, {0, 6}, {0, 7} }},
    reg{{ {7, 0}, {7, 1}, {6, 0}, {5, 3}, {4, 2}, {4, 3}, {4, 4}, {3, 3}, {1, 7}, {0, 6}, {0, 7} }},
    reg{{ {7, 0}, {7, 1}, {6, 0}, {6, 1}, {5, 1}, {4, 4}, {1, 5}, {1, 6}, {1, 7}, {0, 6}, {0, 7} }}
};

#endif // BLOCK_METRICS_H